<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="pinterest" content="nopin">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="generator" content="Hugo 0.29" />



<link rel="canonical" href="https://macdfree.github.io/posts/cc1101%E5%92%8Cmsp430%E8%B0%83%E8%AF%95/">


    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
    <title>CC1101和MSP430调试 - MACDeer&#39;s Blog</title>
    
<meta name="description" content="&lt;p&gt;本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;">

<meta property="og:title" content="CC1101和MSP430调试 - MACDeer&#39;s Blog">
<meta property="og:type" content="article">
<meta property="og:url" content="https://macdfree.github.io/posts/cc1101%E5%92%8Cmsp430%E8%B0%83%E8%AF%95/">
<meta property="og:image" content="https://macdfree.github.io/images/default.png">
<meta property="og:site_name" content="MACDeer&#39;s Blog">
<meta property="og:description" content="&lt;p&gt;本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;">
<meta property="og:locale" content="ja_JP">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="MACDeer&#39;s Blog">
<meta name="twitter:url" content="https://macdfree.github.io/posts/cc1101%E5%92%8Cmsp430%E8%B0%83%E8%AF%95/">
<meta name="twitter:title" content="CC1101和MSP430调试 - MACDeer&#39;s Blog">
<meta name="twitter:description" content="&lt;p&gt;本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;">
<meta name="twitter:image" content="https://macdfree.github.io/images/default.png">


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id":"https://macdfree.github.io/"
    },
    "headline": "CC1101和MSP430调试 - MACDeer&#39;s Blog",
    "image": {
      "@type": "ImageObject",
      "url": "https://macdfree.github.io/images/default.png",
      "height": 800,
      "width": 800
    },
    "datePublished": "2014-06-04T00:00:00JST",
    "dateModified": "2014-06-04T00:00:00JST",
    "author": {
      "@type": "Person",
      "name": "MACDeer&#39;s Blog"
    },
    "publisher": {
      "@type": "Organization",
      "name": "MACDeer&#39;s Blog",
      "logo": {
        "@type": "ImageObject",
        "url": "https://macdfree.github.io/images/logo.png",
        "width": 600,
        "height": 60
      }
    },
    "description": "<p>本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。</p>

<p></p>"
  }
</script>


    <link href="https://macdfree.github.io/css/styles.css" rel="stylesheet">
    

  </head>

  <body>
    
    
    

    <header class="l-header">
      <nav class="navbar navbar-default">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://macdfree.github.io/">MACDeer&#39;s Blog</a>
          </div>

          

        </div>
      </nav>
    </header>

    <main>
      <div class="container">
        
<div class="row">
  <div class="col-md-8">

    <nav class="p-crumb">
      <ol class="breadcrumb">
        <li><a href="https://macdfree.github.io/"><i class="fa fa-home" aria-hidden="true"></i></a></li>
        
        <li itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://macdfree.github.io/posts/" itemprop="url"><span itemprop="title">posts</span></a></li>
        
        <li class="active">CC1101和MSP430调试</li>
      </ol>
    </nav>

    <article class="single">
  <header>
    <ul class="p-facts">
      <li><i class="fa fa-calendar" aria-hidden="true"></i><time datetime="2014-06-04T00:00:00JST">Jun 4, 2014</time></li>
      <li><i class="fa fa-bookmark" aria-hidden="true"></i><a href="https://macdfree.github.io/posts/">posts</a></li>
      
    </ul>

    <h1 class="title">CC1101和MSP430调试</h1>
  </header>

  

  <div class="article-body"><p>本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。</p>

<p></p>

<ol>
<li><p>MSP430的硬件SPI部分</p>

<p>CC1101与MSP430间的通信通过SPI接口，程序使用MSP430的硬件SPI接口，需要配置相应的寄存器。其中我犯的错误是在配置完寄存器后没有置位USPIEx，关于SPI接口的状态转换图如下：<img src="http://ocd8m6zlz.bkt.clouddn.com/m7.png" alt="SPI状态转换" />
另外，关于MSP430对IO口复用设置的问题，对于SPI需要设置P3.1、P3.2、P3.3为SPI功能，分别对应SIMO0、SOMI0、UCLK0，其中SOMI0从数据的流向上来说是输入，而SIMO0和UCLK0为输出。那设置时要规定引脚的方向吗？数据手册中的这段话给出了答案：</p>

<blockquote>
<p>Setting PxSELx = 1 does not automatically set the pin direction. Other peripheral module functions may require the PxDIRx bits to be configured according to the direction needed for the module function. See the pin schematics in the device-specific datasheet.</p>
</blockquote>

<p>最后是关于使用非中断方式SPI接口中判断是否发送完毕的检测，照理来说使用IFG1中的UTXIFG0和U0TCTL中的TXEPT都是可以的，但最后还是使用了第二种方法（估计UTXIFG0需要手动清零，未验证）。</p></li>

<li><p>CC1101常用寄存器</p>

<ul>
<li>PKTCTRL1</li>
</ul>

<p>主要设置是否将RSSI和LQI状态字节附加在数据包后，以及是否开启地址检查。</p>

<ul>
<li>PKTCTRL0</li>
</ul>

<p>是否开启CRC校验，设置数据包长度配置，当为可变长时同步词汇后的第一个位配置数据包长度。</p>

<ul>
<li>MCSM1</li>
</ul>

<p>配置数据包发送或被接收后CC1101进入什么状态。</p></li>
</ol>

<hr />

<p>2014-06-08</p>

<p>补充：发现调试到最后加点延时就成功了，然后再把添加的延时注释掉程序依然正常运行，这该如何是好？</p>

<p>插入延时的位置：</p>

<ol>
<li>设置完寄存器后</li>
<li>写TXFIFO后</li>
<li><code>while(!GDO0);while(GDO0);</code>后</li>
<li>每次发送或接收完后</li>
</ol></div>

  <footer class="article-footer">
    
    
    
    <section class="bordered">
      <header>
        <div class="panel-title">CATEGORIES</div>
      </header>
      <div>
        <ul class="p-terms">
          
          <li><a href="https://macdfree.github.io/categories/note/">note</a></li>
          
        </ul>
      </div>
    </section>
    
    
    
    <section class="bordered">
      <header>
        <div class="panel-title">TAGS</div>
      </header>
      <div>
        <ul class="p-terms">
          
          <li><a href="https://macdfree.github.io/tags/cc1101/">CC1101</a></li>
          
          <li><a href="https://macdfree.github.io/tags/msp430/">MSP430</a></li>
          
        </ul>
      </div>
    </section>
    
    
  </footer>

</article>


    
  </div>

  <div class="col-md-4">
    
<aside class="l-sidebar">

  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">LATESTS</div>
    </div>
    <div class="list-group">
      
      <a href="https://macdfree.github.io/wiki/sqlite/%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5/" class="list-group-item">常用语句</a>
      
      <a href="https://macdfree.github.io/wiki/redis/redis%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="list-group-item">Redis常用命令</a>
      
      <a href="https://macdfree.github.io/wiki/python/pip%E5%AE%89%E8%A3%85%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" class="list-group-item">Pip安装常见问题</a>
      
      <a href="https://macdfree.github.io/wiki/python/virtualenv%E4%BD%BF%E7%94%A8/" class="list-group-item">Virtualenv使用</a>
      
      <a href="https://macdfree.github.io/wiki/oracle/oracle%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/" class="list-group-item">Oracle相关命令</a>
      
      <a href="https://macdfree.github.io/wiki/oracle/%E6%96%B0%E5%BA%93%E5%AF%BC%E5%85%A5/" class="list-group-item">新库导入</a>
      
      <a href="https://macdfree.github.io/wiki/oracle/directory%E7%AE%A1%E7%90%86/" class="list-group-item">DIRECTORY管理</a>
      
      <a href="https://macdfree.github.io/wiki/oracle/sql%E8%AE%B0%E5%BD%95/" class="list-group-item">SQL记录</a>
      
      <a href="https://macdfree.github.io/wiki/mysql/mysql%E4%BF%AE%E6%94%B9%E8%BF%9E%E6%8E%A5%E6%97%B6%E9%97%B4/" class="list-group-item">MySQL修改连接时间</a>
      
      <a href="https://macdfree.github.io/wiki/mysql/mysql%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/" class="list-group-item">MySQL安装配置及导入导出</a>
      
    </div>
  </section>

  
  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title"><a href="https://macdfree.github.io/categories/" class="decoration-none">CATEGORY</a></div>
    </div>
    <div class="list-group">
      
      <a href="https://macdfree.github.io/categories/linux" class="list-group-item">linux</a>
      
      <a href="https://macdfree.github.io/categories/note" class="list-group-item">note</a>
      
      <a href="https://macdfree.github.io/categories/java" class="list-group-item">java</a>
      
      <a href="https://macdfree.github.io/categories/oracle" class="list-group-item">oracle</a>
      
      <a href="https://macdfree.github.io/categories/macos" class="list-group-item">macos</a>
      
      <a href="https://macdfree.github.io/categories/mysql" class="list-group-item">mysql</a>
      
      <a href="https://macdfree.github.io/categories/python" class="list-group-item">python</a>
      
      <a href="https://macdfree.github.io/categories/bigdata" class="list-group-item">bigdata</a>
      
      <a href="https://macdfree.github.io/categories/go" class="list-group-item">go</a>
      
      <a href="https://macdfree.github.io/categories/html" class="list-group-item">html</a>
      
    </div>
  </section>
  
  <section class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title"><a href="https://macdfree.github.io/tags/" class="decoration-none">TAG</a></div>
    </div>
    <div class="list-group">
      
      <a href="https://macdfree.github.io/tags/bash" class="list-group-item">bash</a>
      
      <a href="https://macdfree.github.io/tags/cc1101" class="list-group-item">cc1101</a>
      
      <a href="https://macdfree.github.io/tags/hive" class="list-group-item">hive</a>
      
      <a href="https://macdfree.github.io/tags/msp430" class="list-group-item">msp430</a>
      
      <a href="https://macdfree.github.io/tags/apache" class="list-group-item">apache</a>
      
      <a href="https://macdfree.github.io/tags/brew" class="list-group-item">brew</a>
      
      <a href="https://macdfree.github.io/tags/c" class="list-group-item">c</a>
      
      <a href="https://macdfree.github.io/tags/cc2500" class="list-group-item">cc2500</a>
      
      <a href="https://macdfree.github.io/tags/curl" class="list-group-item">curl</a>
      
      <a href="https://macdfree.github.io/tags/figlet" class="list-group-item">figlet</a>
      
    </div>
  </section>
  

</aside>


  </div>
</div>

      </div>
    </main>

    <footer class="l-footer">
      <div class="container">
        <p><span class="h-logo">&copy; MACDeer&#39;s Blog</span></p>
        <aside>
          <p>Powered by <a href="https://gohugo.io/">Hugo</a>.</p>
          <p><a href="https://github.com/MACDfree/hugo_theme_beg">Beg</a> designed by <a href="http://yet.unresolved.xyz/">Daisuke Tsuji</a> | <a href="https://github.com/MACDfree">MACDfree</a>.</p>
        </aside>
      </div>
    </footer>

    <script src="//code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

