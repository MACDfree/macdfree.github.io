<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CC1101和MSP430调试 | MACDeer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。">
<meta property="og:type" content="article">
<meta property="og:title" content="CC1101和MSP430调试">
<meta property="og:url" content="https://macdfree.github.io/2014/06/04/CC1101和MSP430调试/index.html">
<meta property="og:site_name" content="MACDeer">
<meta property="og:description" content="本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。">
<meta property="og:image" content="https://macdfree.github.io/m7.png">
<meta property="og:updated_time" content="2016-09-25T07:03:39.338Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CC1101和MSP430调试">
<meta name="twitter:description" content="本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。">
<meta name="twitter:image" content="https://macdfree.github.io/m7.png">
  
    <link rel="alternate" href="/atom.xml" title="MACDeer" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- 
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
   -->
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <!-- <h1 id="logo-wrap">
        <a href="/" id="logo">MACDeer</a>
      </h1>
       -->
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/MACDfree" title="GitHub"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://macdfree.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-CC1101和MSP430调试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/04/CC1101和MSP430调试/" class="article-date">
  <time datetime="2014-06-03T16:00:00.000Z" itemprop="datePublished">2014-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      CC1101和MSP430调试
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本篇记录最近调试基于MSP430的CC1101射频通信程序中遇到的问题和需要注意的地方。</p>
<a id="more"></a>
<ol>
<li><p>MSP430的硬件SPI部分</p>
<p>CC1101与MSP430间的通信通过SPI接口，程序使用MSP430的硬件SPI接口，需要配置相应的寄存器。其中我犯的错误是在配置完寄存器后没有置位USPIEx，关于SPI接口的状态转换图如下：<img src="m7.png" alt="SPI状态转换"><br>另外，关于MSP430对IO口复用设置的问题，对于SPI需要设置P3.1、P3.2、P3.3为SPI功能，分别对应SIMO0、SOMI0、UCLK0，其中SOMI0从数据的流向上来说是输入，而SIMO0和UCLK0为输出。那设置时要规定引脚的方向吗？数据手册中的这段话给出了答案：</p>
<blockquote>
<p>Setting PxSELx = 1 does not automatically set the pin direction. Other peripheral module functions may require the PxDIRx bits to be configured according to the direction needed for the module function. See the pin schematics in the device-specific datasheet.</p>
</blockquote>
<p>最后是关于使用非中断方式SPI接口中判断是否发送完毕的检测，照理来说使用IFG1中的UTXIFG0和U0TCTL中的TXEPT都是可以的，但最后还是使用了第二种方法（估计UTXIFG0需要手动清零，未验证）。</p>
</li>
<li><p>CC1101常用寄存器</p>
<ul>
<li>PKTCTRL1</li>
</ul>
<p>主要设置是否将RSSI和LQI状态字节附加在数据包后，以及是否开启地址检查。</p>
<ul>
<li>PKTCTRL0</li>
</ul>
<p>是否开启CRC校验，设置数据包长度配置，当为可变长时同步词汇后的第一个位配置数据包长度。</p>
<ul>
<li>MCSM1</li>
</ul>
<p>配置数据包发送或被接收后CC1101进入什么状态。</p>
</li>
</ol>
<hr>
<p>2014-06-08</p>
<p>补充：发现调试到最后加点延时就成功了，然后再把添加的延时注释掉程序依然正常运行，这该如何是好。。。。</p>
<p>插入延时的位置：</p>
<ol>
<li>设置完寄存器后</li>
<li>写TXFIFO后</li>
<li><code>while(!GDO0);while(GDO0);</code>后</li>
<li>每次发送或接收完后</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://macdfree.github.io/2014/06/04/CC1101和MSP430调试/" data-id="citnuqlfd0001rse82t711929" class="article-share-link">Share</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CC1101/">CC1101</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MSP430/">MSP430</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/07/08/低功耗节点设计日记01/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          低功耗节点设计日记01
        
      </div>
    </a>
  
  
    <a href="/2014/04/15/C语言备忘1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">C语言复杂声明的理解</div>
    </a>
  
</nav>

  
</article>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/wiki/">wiki</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CC1101/">CC1101</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CC2500/">CC2500</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C语言/">C语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub-Pages/">GitHub Pages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MSP430/">MSP430</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interrupt/">interrupt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekylleb/">jekylleb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/中断/">中断</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动漫/">动漫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单片机/">单片机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/导库/">导库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据泵/">数据泵</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树莓派/">树莓派</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CC1101/" style="font-size: 20px;">CC1101</a> <a href="/tags/CC2500/" style="font-size: 10px;">CC2500</a> <a href="/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/tags/C语言/" style="font-size: 10px;">C语言</a> <a href="/tags/GitHub-Pages/" style="font-size: 10px;">GitHub Pages</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MSP430/" style="font-size: 20px;">MSP430</a> <a href="/tags/Oracle/" style="font-size: 10px;">Oracle</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/interrupt/" style="font-size: 10px;">interrupt</a> <a href="/tags/jekylleb/" style="font-size: 10px;">jekylleb</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/中断/" style="font-size: 10px;">中断</a> <a href="/tags/动漫/" style="font-size: 10px;">动漫</a> <a href="/tags/单片机/" style="font-size: 10px;">单片机</a> <a href="/tags/导库/" style="font-size: 10px;">导库</a> <a href="/tags/数据泵/" style="font-size: 10px;">数据泵</a> <a href="/tags/树莓派/" style="font-size: 10px;">树莓派</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">七月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/09/29/Oracle导库/">Oracle导库</a>
          </li>
        
          <li>
            <a href="/2016/09/18/测试html/">测试HTML</a>
          </li>
        
          <li>
            <a href="/2016/08/26/CentOS注册服务脚本/">CentOS注册服务脚本</a>
          </li>
        
          <li>
            <a href="/2016/06/02/看过的动漫/">看过的动漫</a>
          </li>
        
          <li>
            <a href="/2016/05/29/hexo搭建博客/">hexo搭建博客</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 macd<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    

<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>




  </div>
</body>
</html>